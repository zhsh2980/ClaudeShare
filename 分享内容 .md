# Claude Code 使用分享

## 一、为什么需要 Claude Code？

### 🏛️ 古法编程

Coding 一天 → 脑力榨干 → 回家躺平刷剧

### ⚡ AI 编程

Prompts 一天 → 余50%容量 → 甚至能辅导作业

### 📊 脑力对比

**传统方式：**

- 查文档 20%
- 读代码 30%
- 写代码 30%
- 调试 20%

**使用 Claude：**

- AI处理 70%
- 思考设计 30%

### 🎯 核心价值

解放脑力 = 保留生活

### 📋 今日内容

1. 安装配置
2. 常用命令
3. MCP实战
4. 实战案例

---

## 二、快速上手

### 2.1 安装 Claude Code

**npm 安装**

```bash
npm install -g @anthropic-ai/claude-code
```

内网环境使用代理（当前命令行窗口有效）：

```bash
# 设置npm代理
SET HTTP_PROXY=http://10.200.86.85:8080 && SET HTTPS_PROXY=http://10.200.86.85:8080
```

更改 claude settings 设置（**永久有效**）：

```bash
{
  "env": {
    "HTTPS_PROXY": "http://10.200.86.85:8080",
    "HTTP_PROXY": "http://10.200.86.85:8080"
  }
}
```

### 2.2 启动

```bash
# 确认模式
claude

# 一路放行模式
claude --dangerously-skip-permissions

prompts:
我想在 windows 的 cmd 中，输入 claude 等同于输入 claude --dangerously-skip-permissions 的效果，你帮我搞定
```

### 2.3 配置 CLAUDE.md

Claude Code 支持通过 `CLAUDE.md` 文件来配置项目规范和偏好。

**全局配置：** `~/.claude/CLAUDE.md`
**项目配置：** `项目根目录/CLAUDE.md`

**示例配置：**

```markdown
# 项目规范

1. Python包安装必须使用内网代理：
   pip install <包名> -i http://10.100.1.27:8688/repository/Pypi-group/simple --trusted-host 10.100.1.27

2. 代码规范：
   - 用中文写注释和日志
   - 在程序输出中包含调试信息

3. 遇到不熟悉的库，先用 context7 查询最新文档

4. SVN文件管理：
   - 创建新文件时立即执行 svn add
   - 只add不commit，commit由开发者手动控制
```

---

## 三、基础命令速查

### 📌 日常高频命令

| 命令               | 功能             | 说明                     |
| ------------------ | ---------------- | ------------------------ |
| `/help`            | 查看帮助         | 查看所有可用命令         |
| `/clear`           | 清空上下文       | 对话太长时使用，释放内存 |
| `/compact`         | 重开对话保留记忆 | 压缩历史，保留关键信息   |
| `/resume`          | 查看历史聊天记录 | 查看之前的对话           |
| `@文件名`          | 指定特定文件     | 让AI聚焦特定文件         |
| `Ctrl+V(或者拖拽)` | 粘贴图片/截图    | 分析截图、设计稿         |

### 🎯 模式切换

| 快捷键/命令                                      | 功能         | 使用场景               |
| ------------------------------------------------ | ------------ | ---------------------- |
| `Shift+Tab`                                      | Plan模式     | 只规划不执行，先看方案 |
| `Shift+Tab`再按一次                              | Yolo模式     | 自动执行，不需要确认   |
| `Ultrathink > Think Harder > Think Hard > Think` | 深度思考模式 | 复杂问题需要深入分析   |
| `--dangerously-skip-permissions`                 | 跳过确认     | 自动执行所有操作       |

### 📊 监控与管理

**查看API用量：**

```bash
# 安装监控工具
npm install ccusage

# 查看用量
ccusage

# 实时监控
ccusage blocks --live
```

**或者使用 claude-monitor：**

```bash
# 安装
pip install claude-monitor -i http://10.100.1.27:8688/repository/Pypi-group/simple --trusted-host 10.100.1.27

# 使用
claude-monitor
# 或简写
cmonitor
ccmonitor
```

### ⚙️ 配置与升级

```bash
# 自定义状态栏
npx ccstatusline@latest

# 升级 Claude Code
claude update

# 查看版本
claude --version

```

---

## 四、MCP 实战：Playwright 抓取请求

### 4.1 什么是 MCP？

**MCP (Model Context Protocol)** 是扩展 Claude 能力的插件系统。

通过 MCP，Claude Code 可以：

- 操作浏览器（Playwright）
- 增强文件操作（filesystem）
- 实时查询最新文档（context7）
- 等等...

### 4.2 实战演示：抓取内网请求

**目标：** 使用 Playwright 抓取 `https://wcms.wind.com.cn:9006/robert/` 的网络请求

#### 步骤 1：确认 MCP 已安装

Claude Code 安装 `Playwright` MCP。

```
帮我安装微软的playwright mcp工具(全局安装)

mcp安装参考：D:\Codes\Claude Code\mcp安装\mcpInstallDoc.md

结合github页面：github.com/microsoft/playwright

装好后帮我测试是否可用，直到能用为止。
```

#### 步骤 2：开始抓取

**直接对 Claude 说：**

```
1.用 playwright mcp 打开 https://wcms.wind.com.cn:9006/robert/ ，如果要登录，请等待
2.登录后，在输入框输入一个随机问题，点击发送，抓取发送的接口
3.写一个python脚本，调用抓取到的接口，传参是随机问题
4.测试这个脚本，看是否跑通，直到跑通为止
```

### 4.3 常用 MCP 推荐

| MCP            | 功能         | 使用场景                   |
| -------------- | ------------ | -------------------------- |
| **Playwright** | 浏览器自动化 | 网页抓取、UI测试、性能分析 |
| **filesystem** | 文件操作增强 | 批量文件处理、目录管理     |
| **context7**   | 实时查询文档 | 获取最新库文档、API说明    |

**使用 context7 示例：**

```
用 context7 查询【鸿蒙】的最新【状态管理】用法，并且查询怎么从V1迁移到V2？
```

---

## 四层级 Prompt 设计

1. L1：我要 Z
   – 最基础层次，清晰明确地告知最终目标
2. L2：现在是 Y，我要 Z
   – 在阐述目标的同时，告知当前状况或上下文
3. L3：我做了 X，现在是 Y，我要 Z
   – 补充已尝试的操作，帮助 AI 更好地理解问题
4. L4：请基于 W，实现 Z
   – 最高阶指令，直接给出具体执行步骤或约束

## 五、## 实战案例：轮播图组件开发

> **TODO：** 这部分将演示完整的轮播图组件开发过程，包括：
>
> - 需求分析
> - 组件设计
> - 代码实现
> - 样式调试
> - 功能测试

**预计演示内容：**

1. 从需求描述到代码生成
2. 使用 Plan 模式规划结构
3. 自动处理边界情况
4. 集成到现有项目

---

## 六、常见问题与最佳实践

### 💡 常见坑点

#### 1. 代理配置问题

**问题：** 内网环境无法下载包
**解决：** 在 CLAUDE.md 配置代理，让 Claude 自动使用

#### 2. 权限问题

**问题：** 无管理员权限，无法设置系统环境变量
**解决：** 只设置用户级环境变量，在 CLAUDE.md 说明这个限制

#### 3. SVN/Git 集成

**问题：** Cla
